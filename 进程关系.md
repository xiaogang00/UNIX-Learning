#### 终端登录

一般来说在这里，登录都是经由内核中的终端设备驱动程序来进行。

* 登录过程在过去 1 5年中并没有多少改变。系统管理者创建一个通常名为 /etc/ttys的文件。
* 当用户键入了用户名后， getty就完成了。然后它以类似于下列的方式调用login程序：
  execle("/usr/bin/login", "login", "-p", username, (char *) 0, envp)；
* login 能处理多项工作。因为它得到了用户名，所以能调用 getpwnam 取得相应用户的
  口令文件登录项。然后调用getpass （ 3）以显示提示“ Password：”接着读用户键入的口令（自然，禁止回送用户键入的口令）。它调用crypt（ 3）将用户键入的口令加密，并与该用户口令文件中登录项的 pw_passwd字段相比较。如果用户几次键入的口令都无效，则 login 以参数 1调用 exit 表示登录过程失败。父进程（init）了解到子进程的终止情况后，将再次调用fork，其后又跟随着执行 getty，对此终端重复上述过程。
* 如果用户正确登录，login就将当前工作目录更改为该用户的起始目录 (chdir)。它也调用chown改变该终端的所有权，使该用户成为所有者和组所有者。
* 每个进程除了有一进程ID之外，还属于一个进程组，每个进程组有一个唯一的进程组 ID。进程组ID类似于进程ID——它是一个正整数，并可存放在 p i d _ t数据类型中。
* 对话期（session）是一个或多个进程组的集合。



需要有一种方法来通知内核哪一个进程组是前台进程组，这样，终端设备驱动程序就能了解将终端输入和终端产生的信号送到何处，需要用到tcgetpgrp和tcsetpgrp函数。

#### 作业控制

作业控制要求三种形式的支持：

1. 支持作业控制的s h e l l。
2. 内核中的终端驱动程序必须支持作业控制。
3. 必须提供对某些作业控制信号的支持。

