* 管道是UNIX IPC的最老形式，并且所有U N I X系统都提供此种通信机制，管道有两种限制；

  (1) 它们是半双工的。数据只能在一个方向上流动。

  (2) 它们只能在具有公共祖先的进程之间使用。通常，一个管道由一个进程创建，然后该进程调用fork，此后父、子进程之间就可应用该管道。

* 我们将会看到流管道没有第一种限制， FIFO和命名流管道则没有第二种限制。尽管有这两种限制，半双工管道仍是最常用的IPC形式。

* 单个进程中的管道几乎没有任何用处。通常，调用 pipe的进程接着调用fork，这样就创建了从父进程到子进程或反之的IPC通道。

* 当管道的一端被关闭后，下列规则起作用：

  1.  当读一个写端已被关闭的管道时，在所有数据都被读取后，read返回0，以指示达到了文件结束处.
  2.  如果写一个读端已被关闭的管道，则产生信号 SIGPIPE。如果忽略该信号或者捕捉该信号并从其处理程序返回，则write出错返回，errno设置为EPIPE。

* 在写管道时，常数PIPE_BUF规定了内核中管道缓存器的大小。如果对管道进行write调用，而且要求写的字节数小于等于PIPE_BUF，则此操作不会与其他进程对同一管道（或FIFO）的write操作穿插进行。

* popen和pclose函数因为常见的操作是创建一个连接到另一个进程的管道，然后读其输出或向其发送输入，所以标准I / O库为实现这些操作提供了两个函数 popen和pclose。这两个函数实现的操作是：创建一个管道，fork一个子进程，关闭管道的不使用端， exec一个shell以执行命令，等待命令终止。

#### 协同进程

UNIX过滤程序从标准输入读取数据，对其进行适当处理后写到标准输出。几个过滤进程通常在shell管道命令中线性地连接。当同一个程序产生某个过滤程序的输入，同时又读取该过滤程序的输出时，则该过滤程序就成为协同进程。

popen提供连接到另一个进程的标准输入或标准输出的一个单行管道，而对于协同进程，则它有连接到另一个进程的两个单行管道—一个接到其标准输入，另一个则来自标准输出。

#### FIFO

FIFO有时被称为命名管道。管道只能由相关进程使用，它们共同的祖先进程创建了管道。但是，通过FIFO，不相关的进程也能交换数据。

FIFO有两种用途：

1. FIFO由s h e l l命令使用以便将数据从一条管道线传送到另一条，为此无需创建中间临时文件。
2. FIFO用于客户机-服务器应用程序中，以在客户机和服务器之间传递数据。

#### 系统V IPC

三种系统VIPC：消息队列、信号量以及共享存储器之间有很多相似之处。以下各节将说明这些IPC的各自特殊功能，本节先介绍它们类似的特征。

#### 信号量

信号量与已经介绍过的 IPC机构（管道、 FIFO以及消息列队）不同。它是一个计数器，用于多进程对共享数据对象的存取。为了获得共享资源，进程需要执行下列操作：

1. 测试控制该资源的信号量。
2. 若此信号量的值为正，则进程可以使用该资源。进程将信号量值减 1，表示它使用了一个资源单位。
3. 若此信号量的值为 0，则进程进入睡眠状态，直至信号量值大于 0。若进程被唤醒后，它返回至(第( 1 )步)。


#### 共享存储

共享存储允许两个或多个进程共享一给定的存储区。因为数据不需要在客户机和服务器之间复制，所以这是最快的一种 I P C。使用共享存储的唯一窍门是多个进程之间对一给定存储区的同步存取。若服务器将数据放入共享存储区，则在服务器做完这一操作之前，客户机不应当去取这些数据。

调用的第一个函数通常是shmget，它获得一个共享存储标识符。

shmctl函数对共享存储段执行多种操作。共享存储可由不相关的进程使用。但是，如果进程是相关的。

