本章将设计一个简单的、多用户数据库的函数库。通过此函数库提供的 C语言函数，其他程序可以访问数据库中的记录。这个 C函数库只是一个完整的数据库的很小的一部分，并不包括其他很多部分。

#### 函数库

当打开一个数据库时，通过返回值得到一个 DB结构的指针。这一点很像通过fopen得到一个FILE结构的指针，以及通过opendir得到一个DIR结构的指针。我们将用此指针作为参数来调用以后的数据库函数。

如果db_open成功返回，则将建立两个文件： pathname.idx 和pathname.dat，pathname.idx是索引文件， pathname.dat是数据文件。

当不再使用数据库时，调用 db_close来关闭数据库。  db_close将关闭索引文件和数据文件，并释放数据库使用过程中分配的所有用于内部缓冲的存储空间。



