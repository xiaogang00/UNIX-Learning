信号是软件中断。很多比较重要的应用程序都需处理信号。

#### 信号

首先，每个信号都有一个名字。这些名字都以三个字符SIG开头。

很多条件可以产生一个信号。

* 当用户按某些终端键时，产生信号。
* 硬件异常产生信号：除数为0、无效的存储访问等等。
* 进程用kill( 2 )函数可将信号发送给另一个进程或进程组。
* 用户可用kill ( 1 )命令将信号发送给其他进程。
* 当检测到某种软件条件已经发生，并将其通知有关进程时也产生信号。

信号是异步事件的经典实例。产生信号的事件对进程而言是随机出现的。进程不能只是测试一个变量(例如errno)来判别是否发生了一个信号。

可以要求系统在某个信号出现时按照下列三种方式中的一种进行操作：

1. 忽略此信号。大多数信号都可使用这种方式进行处理，但有两种信号却决不能被忽略。
   它们是： SIGKILL和SIGSTOP。
2. 捕捉信号。为了做到这一点要通知内核在某种信号发生时，调用一个用户函数。在用
   户函数中，可执行用户希望对这种事件进行的处理。
3. 执行系统默认动作。可以查看对每一种信号的系统默认动作。注意，对大多数信
   号的系统默认动作是终止该进程。

错误类型的信号：

* SIGABRT 调用abort函数时产生此信号。进程异常终止。
* SIGALRM 超过用 alarm函数设置的时间时产生此信号。
* SIGBUS 指示一个实现定义的硬件故障。
* SIGCHLD 在一个进程终止或停止时，SIGCHLD信号被送给其父进程。
* SIGCONT 此作业控制信号送给需要继续运行的处于停止状态的进程。如果接收到此信号的进程处于停止状态，则系统默认动作是使该进程继续运行。
* SIGEMT 指示一个实现定义的硬件故障。
* SIGFPE 此信号表示一个算术运算异常，例如除以 0，浮点溢出等。
* SIGHUP 如果终端界面检测到一个连接断开，则将此信号送给与该终端相关的控制进程（对话期首进程）。
* SIGILL 此信号指示进程已执行一条非法硬件指令。



**UNIX信号机制最简单的界面是signal函数。**

当调用signal设置信号处理程序时，第二个参数是指向该函数 (也就是信号处理程序)的指针。 

程序起动：当执行一个程序时，所有信号的状态都是系统默认或忽略。通常所有信号都被设置为系统默认动作，除非调用exec的进程忽略该信号。比较特殊的是，exec函数将原先设置为要捕捉的信号都更改为默认动作，其他信号的状态则不变。

#### 中断的系统调用

如果在进程执行一个低速系统调用而阻塞期间捕捉到一个信号，则该系统调用就被中断不再继续执行。该系统调用返回出错。

可以用中断系统调用这种方法来处理的一种情况是：一个进程起动了读终端操作，而使用该终端设备的用户却离开该终端很长时间。

#### SIGCLD语义

务必了解你所用的系统中SIGCHLD信号的语义。也应了解在某些系统中 #define SIGCHLD为SIGCLD或反之。更改这种信号的名字使你可以编译为另一个系统编写的程序，但是如果该程序使用该信号的另一种语义，则这样的程序也不能工作。

#### 可靠信号术语与语义

在信号产生（generation）和递送（delivery）之间的时间间隔内，称信号未决（ pending）。



