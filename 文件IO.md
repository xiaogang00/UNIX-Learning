大多数的UNIX文件I/O只需要用到5个函数：open，read，write，lseek以及close

本章所说明的函数经常被称之为不带缓存的I/O。

* UNIX shell使文件描述符0与进程的标准输入相结合，文件描述符 1与标准输出
  相结合，文件描述符2与标准出错输出相结合。

* open函数：调用open函数可以打开或创建一个文件。

* creat函数：此函数也可以创建一个新的文件。在早期的UNIX版本中，open的第二个参数只能是 0、1或2。没有办法打开一个尚未存在的文件，因此需要另一个系统调用 creat以创建新文件。现在，open函数提供了选择项O_CREAT和O_TRUNC，于是也就不再需要creat函数。

* close函数：可用close函数关闭一个打开文件。

* lseek函数：每个打开文件都有一个与其相关联的“当前文件位移量” 。它是一个非负整数，用以度量从文件开始处计算的字节数。通常，读、写操作都从当前文件位移量处开始，并使位移量增加所读或写的字节数。

  文件位移量可以大于文件的当前长度，在这种情况下，对该文件的下一次写将延长该文件。

  od(1)命令观察该文件的实际内容。

* read函数：用read函数从打开文件中读数据。

* write函数：用write函数向打开文件写数据。



#### 文件共享

在进程中，主要的记录结构是三个：**进程表项，文件表，v节点表**。

#### 原子操作

* 添加至一个文件：UNIX提供了一种方法使这种操作成为原子操作，其方法就是在打开文件时设置
  O_APPEND标志。

* 创建一个文件：

* dup函数和dup2函数

  由dup返回的新文件描述符一定是当前可用文件描述符中的最小数值。用dup2则可以用filedes2
  参数指定新描述符的数值。如果 filedes2已经打开，则先将其关闭。如若filedes等于filedes2，则dup2返回filedes2，而不关闭它。

* fcntl函数可以改变已经打开文件的性质。

* ioctl函数是I/O操作的杂物箱。不能用本章中其他函数表示的 I/O操作通常都能用ioctl表示。
  终端I / O是ioctl的最大使用方面。